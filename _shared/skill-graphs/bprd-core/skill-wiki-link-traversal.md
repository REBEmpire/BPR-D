---
Date: 2026-02-18
Author: "Claude | Model: claude-sonnet-4-6"
Version: v1.0
Status: Active
---

# Skill: Wiki Link Traversal (Depth-3 Graph Walking)

**Domain:** Backlog & Discovery | **Tier:** Core
**Used by:** crewai-service/backlog/discovery.py
**Back to:** [[MOC-Core]] | [[MOC-Handoffs]]

---

## What It Does

Parses `[[wiki-link]]` syntax in any scanned markdown file, loads the referenced skill node, and extracts relevant context — recursively up to depth 3.

This is what makes the skill graph **actually useful** in automated sessions: agents get the relevant procedural knowledge automatically, without needing to query it explicitly.

---

## Algorithm

```python
def traverse_wiki_links(content: str, depth: int = 3, visited: set = None) -> str:
    """
    Walk [[wiki links]] in content up to `depth` levels deep.
    Returns concatenated context from all linked skill nodes.
    """
    if visited is None:
        visited = set()
    if depth == 0:
        return ""

    links = re.findall(r'\[\[([^\]]+)\]\]', content)
    context_parts = []

    for link in links:
        node_name = link.strip()
        if node_name in visited:
            continue  # Avoid cycles
        visited.add(node_name)

        # Resolve to file path
        node_path = f"_shared/skill-graphs/bprd-core/{node_name}.md"
        node_content = await read_file(node_path)
        if node_content.startswith("Error"):
            continue

        # Extract key sections
        summary = _extract_section(node_content, "What It Does")
        related = _extract_section(node_content, "Related Skills")

        context_parts.append(f"### [{node_name}]\n{summary}\n")

        # Recurse
        deeper = await traverse_wiki_links(related, depth - 1, visited)
        if deeper:
            context_parts.append(deeper)

    return "\n".join(context_parts)
```

---

## Depth Limits

| Depth | What Gets Loaded |
|-------|-----------------|
| 1 | Direct links in the source file |
| 2 | Links in those linked files |
| 3 | Links in those files (max) |

At depth 3 we stop to prevent runaway context bloat. Empirically, depth 3 covers ~95% of relevant context for any given task.

---

## Cycle Prevention

Visited set is passed through all recursive calls. If node A links to node B which links back to A, we skip A on the second encounter.

---

## Context Output Format

```markdown
## Linked Skill Context (from [[wiki links]])

### [skill-handoff-protocols]
Two-tier handoff system: operational (agent/handoff.md) and escalation (_handoffs/ directory)...

### [skill-cost-governance]
$20/month team budget. Per-agent caps: Grok $5, Claude $6, Gemini $5, Abacus $4...
```

This block is appended to each backlog item's context in the session prompt.

---

## Related Skills

- [[skill-backlog-discovery]] — calls this function in Phase 0
- [[skill-graph-self-maintenance]] — adds new nodes that this traversal finds
- [[skill-prompt-injection-runtime]] — uses traversal output for dynamic injection
- [[skill-agent-self-evolution]] — agents can trigger re-traversal via /reflect

---

*Generated by: Claude | Model: claude-sonnet-4-6 | 2026-02-18*
