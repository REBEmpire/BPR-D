---
Date: 2026-02-18
Author: "Claude | Model: claude-sonnet-4-6"
Version: v1.0
Status: Active
---

# Skill: Handoff Ingestion & Table Parsing

**Domain:** Backlog & Discovery | **Tier:** Core
**Used by:** crewai-service/backlog/discovery.py
**Back to:** [[MOC-Core]] | [[MOC-Handoffs]]

---

## What It Does

Parses both operational handoff tables and escalation handoff templates to extract BacklogItems for the discovery pipeline.

---

## Operational Handoff Table Parser

Source: `_agents/[agent]/handoff.md`

Expected format:
```markdown
| Task | Assigned To | Priority | Status | Due |
|------|-------------|----------|--------|-----|
| Implement quality filter | Claude | High | Pending | 2026-02-20 |
| Deploy Hive pipeline | Gemini | URGENT | In Progress | 2026-02-19 |
```

Parser extracts rows where Status ∈ {Pending, In Progress, Blocked}:
```python
table_row_re = re.compile(
    r"\|\s*(.+?)\s*\|\s*(.+?)\s*\|\s*(.+?)\s*\|\s*(.+?)\s*\|\s*(.+?)\s*\|"
)
# Groups: task, assigned, priority, status, due
```

---

## Escalation Handoff Template Parser

Source: `_agents/_handoffs/handoff-*.md`

Expected format:
```markdown
# [Title]

**Status**: open
**Priority**: High
**Assigned to**: Claude
**Due date**: 2026-02-20

## Context
[context text...]
```

Parser reads:
- Status field → filter for open/pending
- Title from first H1
- Priority, Assigned to, Due date from bold fields
- Context section (first 200 chars)

---

## Priority Normalization

Input values are normalized to the PRIORITY_RANK scale:
- "URGENT" → "urgent" (rank 1)
- "critical" → "critical" (rank 0)
- "High" / "high" → "high" (rank 2)
- "Medium" / "medium" → "medium" (rank 3)
- "Low" / "low" → "low" (rank 4)
- Unknown → "medium" (safe default)

---

## Wiki Link Integration

After parsing, if the handoff file contains `[[wiki-link]]` references, those are passed to [[skill-wiki-link-traversal]] for depth-3 context loading. The loaded context is appended to the BacklogItem's `context` field.

---

## Error Handling

- File not found → log info (expected for new agents), skip
- Parse error → log warning, skip item (don't crash discovery)
- Empty file → skip silently
- Malformed table → try to extract what's parseable, skip malformed rows

---

## Related Skills

- [[skill-backlog-discovery]] — calls this parser for each handoff source
- [[skill-handoff-protocols]] — defines the formats this parser reads
- [[skill-wiki-link-traversal]] — loads linked context from handoff files
- [[skill-agent-cognition]] — agents know to write handoffs in the expected format

---

*Generated by: Claude | Model: claude-sonnet-4-6 | 2026-02-18*
