# bprd_file_utils.py - Append-only handler for all living documents
import os
from datetime import datetime

def append_to_file(filename: str, content: str, section_header: str = "Update"):
    """NEVER overwrites. Always appends with timestamp. Use for meetings, work_sessions, handoff.md, etc."""
    timestamp = datetime.now().strftime("%Y-%m-%d %H:%M:%S PST")
    full_content = f"\n\n--- {section_header} at {timestamp} ---\n{content}\n"

    mode = 'a' if os.path.exists(filename) else 'w'
    with open(filename, mode, encoding='utf-8') as f:
        if mode == 'w':
            f.write(f"# BPR&D Living Document - Append-Only Mode\n\n")
        f.write(full_content)

# Example usage (replace all open(..., 'w') in meeting/work session code):
# from bprd_file_utils import append_to_file
# append_to_file("meeting_2026-02-17.md", "Full log here...", "Meeting Log")
